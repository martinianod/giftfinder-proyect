# ============================================================
# GIFTFINDER ENVIRONMENT VARIABLES
# ============================================================
# Copy this file to .env and update with your values
# DO NOT commit .env to version control
# ============================================================

# ============================================================
# POSTGRES DATABASE
# ============================================================
POSTGRES_DB=giftfinder
POSTGRES_USER=giftfinder_user
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION  # ⚠️ MUST CHANGE FOR PRODUCTION
POSTGRES_PORT=5432

# ============================================================
# APPLICATION PORTS
# ============================================================
BACKEND_PORT=8080
SCRAPER_PORT=8001

# ============================================================
# OLLAMA CONFIGURATION
# ============================================================
# Ollama API host URL (internal Docker network address)
OLLAMA_HOST=http://ollama:11434

# Ollama model to use for AI processing
OLLAMA_MODEL=qwen2.5:1.5b

# Ollama API timeout in seconds (5-60)
OLLAMA_TIMEOUT=15

# ============================================================
# SCRAPER CONFIGURATION
# ============================================================
# HTTP scraping timeout in seconds (5-30)
SCRAPER_TIMEOUT=12

# Maximum concurrent scraping operations (1-10)
# Lower values reduce CPU/memory usage but increase latency
MAX_CONCURRENT_SCRAPES=3

# Delay between scraping requests in seconds (0.1-5.0)
# Prevents rate limiting from target websites
RATE_LIMIT_DELAY=1.0

# Maximum items to scrape per request (5-50)
MAX_ITEMS_PER_SCRAPE=20

# ============================================================
# CACHE CONFIGURATION
# ============================================================
# Cache TTL in seconds (300-86400 = 5min-24h)
# Longer TTL reduces API calls but may serve stale data
CACHE_TTL_SECONDS=3600

# Maximum cache entries (100-10000)
# Higher values use more memory but cache more data
CACHE_MAX_SIZE=1000

# ============================================================
# API RATE LIMITING
# ============================================================
# Rate limit per IP address per minute (5-100)
# Prevents abuse and DoS attacks
RATE_LIMIT_PER_MINUTE=30

# Maximum query length in characters (10-2000)
QUERY_MAX_LENGTH=500

# ============================================================
# LOGGING CONFIGURATION
# ============================================================
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Use JSON structured logging (true/false)
# JSON logs are recommended for production (better for log aggregation)
LOG_JSON=true

# ============================================================
# APPLICATION CONFIGURATION
# ============================================================
# Application name (used in logs and metrics)
APP_NAME=giftfinder-scraper

# Environment name: development, staging, production
ENVIRONMENT=production

# ============================================================
# BACKEND CONFIGURATION
# ============================================================
# Scraper API base URL (internal Docker network address)
SCRAPER_BASE_URL=http://scraper:8001

# Spring Boot active profile
SPRING_PROFILES_ACTIVE=default

# Spring DataSource JDBC URL
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/${POSTGRES_DB}

# Spring DataSource credentials (same as POSTGRES_USER/PASSWORD)
SPRING_DATASOURCE_USERNAME=${POSTGRES_USER}
SPRING_DATASOURCE_PASSWORD=${POSTGRES_PASSWORD}

# ============================================================
# SECURITY NOTES
# ============================================================
# 1. Change POSTGRES_PASSWORD to a strong, unique value
# 2. Do not use default passwords in production
# 3. Use environment-specific .env files (e.g., .env.prod)
# 4. Never commit .env files to version control
# 5. Rotate credentials regularly
# 6. Use secrets management in production (e.g., AWS Secrets Manager)

# ============================================================
# PERFORMANCE TUNING NOTES
# ============================================================
# For high-traffic scenarios:
# - Increase MAX_CONCURRENT_SCRAPES (but monitor CPU/memory)
# - Increase CACHE_TTL_SECONDS to reduce API calls
# - Increase CACHE_MAX_SIZE if you have memory available
# - Increase RATE_LIMIT_PER_MINUTE if needed
#
# For low-resource environments:
# - Decrease MAX_CONCURRENT_SCRAPES to 1-2
# - Decrease CACHE_MAX_SIZE to 100-500
# - Decrease MAX_ITEMS_PER_SCRAPE to 10
